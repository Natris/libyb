[[crate]]
name = "libyb"
type = "cpp-lib"
sources = [
    "libyb/async/channel.cpp",
    "libyb/async/descriptor_reader.cpp",
    "libyb/async/detail/console_stream.cpp",
    "libyb/async/detail/exit_guard_task.cpp",
    "libyb/async/detail/notification_event.cpp",
    "libyb/async/detail/parallel_composition_task.cpp",
    "libyb/async/detail/parallel_compositor.cpp",
    "libyb/async/detail/runner.cpp",
    "libyb/async/detail/semaphore.cpp",
    "libyb/async/detail/task_impl.cpp",
    "libyb/async/device.cpp",
    "libyb/async/null_stream.cpp",
    "libyb/async/stream.cpp",
    "libyb/async/stream_device.cpp",
    "libyb/async/timer.cpp",
    "libyb/buffer.cpp",
    "libyb/descriptor.cpp",
    "libyb/net/detail/http_request_parser.cpp",
    "libyb/net/http.cpp",
    "libyb/net/http_server.cpp",
#    "libyb/shupito/escape_sequence.cpp",
    "libyb/shupito/flip2.cpp",
    "libyb/stream_parser.cpp",
    "libyb/tunnel.cpp",
    "libyb/usb/bulk_stream.cpp",
    "libyb/usb/detail/usb_request_context.cpp",
    "libyb/usb/interface_guard.cpp",
    "libyb/usb/usb_descriptors.cpp",
    "libyb/usb/usb_device.cpp",
    "libyb/utils/detail/refcount.cpp",
    "libyb/utils/ihex_file.cpp",
    "libyb/utils/sparse_buffer.cpp",
    "libyb/utils/svf_file.cpp",
    "libyb/utils/utf.cpp",
    ]
include_roots = ["."]

[crate.target.win32]
sources = [
    "libyb/async/detail/win32_affinity_task.cpp",
    "libyb/async/detail/win32_async_runner.cpp",
    "libyb/async/detail/win32_console_stream.cpp",
    "libyb/async/detail/win32_file.cpp",
    "libyb/async/detail/win32_group.cpp",
    "libyb/async/detail/win32_handle_task.cpp",
    "libyb/async/detail/win32_prepared_task.cpp",
    "libyb/async/detail/win32_resumable.cpp",
    "libyb/async/detail/win32_serial_port.cpp",
    "libyb/async/detail/win32_sync_runner.cpp",
    "libyb/async/detail/win32_timer.cpp",
    "libyb/async/detail/win32_wait_context.cpp",
    "libyb/net/detail/win32_net.cpp",
    "libyb/usb/detail/win32_usb_context.cpp",
    "libyb/usb/detail/win32_usb_device.cpp",
    "libyb/utils/detail/win32_atomic.cpp",
    "libyb/utils/detail/win32_file_operation.cpp",
    "libyb/utils/detail/win32_mutex.cpp",
    "libyb/utils/detail/win32_overlapped.cpp",
    "libyb/utils/detail/win32_singleton.cpp",
    ]

[crate.target.unix]
sources = [
    "libyb/async/detail/linux_async_runner.cpp",
    "libyb/async/detail/linux_console_stream.cpp",
    "libyb/async/detail/linux_group.cpp",
    "libyb/async/detail/linux_prepared_task.cpp",
    "libyb/async/detail/linux_serial_port.cpp",
    "libyb/async/detail/linux_sync_runner.cpp",
    "libyb/async/detail/linux_timer.cpp",
    "libyb/async/detail/linux_wait_context.cpp",
    "libyb/async/detail/unix_file.cpp",
    "libyb/async/detail/unix_wait_context.cpp",
    "libyb/net/detail/linux_net.cpp",
    "libyb/usb/detail/linux_usb_context.cpp",
    "libyb/usb/detail/linux_usb_device.cpp",
    "libyb/utils/detail/linux_event.cpp",
    "libyb/utils/detail/pthread_mutex.cpp",
    "libyb/utils/detail/unix_refcount.cpp",
    ]
